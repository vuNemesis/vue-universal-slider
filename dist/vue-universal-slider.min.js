!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VueUniversalSlider=e()}(this,function(){"use strict";function t(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}function e(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);t.length>e;e++)i[e]=t[e];return i}return Array.from(t)}var i=/^(attrs|props|on|nativeOn|class|style|hook)$/,s=function(e){return e.reduce(function(e,s){var n,o,r,l,d;for(r in s)if(n=e[r],o=s[r],n&&i.test(r))if("class"===r&&("string"==typeof n&&(d=n,e[r]=n={},n[d]=!0),"string"==typeof o&&(d=o,s[r]=o={},o[d]=!0)),"on"===r||"nativeOn"===r||"hook"===r)for(l in o)n[l]=t(n[l],o[l]);else if(Array.isArray(n))e[r]=n.concat(o);else if(Array.isArray(o))e[r]=[n].concat(o);else for(l in o)n[l]=o[l];else e[r]=s[r];return e},{})},n={name:"ui-slider-item-image",props:{item:String,height:Number,index:Number},data:function(){return{loaded:!0}},computed:{styleItemImage:function(){return{style:{height:this.height+"px"}}},classesImage:function(){return{class:[]}}},mounted:function(){var t=this;this.$refs.image.onload=function(){t.sliderRoot.addItem(t.$el,t.index)}},inject:{sliderRoot:{default:null}},render:function(t){return t("div",{class:"slider-item"},[t("img",s([{attrs:{src:this.item}},this.styleItemImage,this.classesImage,{ref:"image"}]))])}},o={name:"ui-slider-item",props:{item:String,height:Number,index:Number,scopedFunc:Function},data:function(){return{loaded:!0}},computed:{styleItemImage:function(){return{height:this.height+"px"}}},mounted:function(){var t=this;this.scopedFunc?this.sliderRoot.addItem(this.$el,this.index):this.$refs.image.onload=function(){t.sliderRoot.addItem(t.$el,t.index)}},inject:{sliderRoot:{default:null}},render:function(t){var e=this.scopedFunc&&this.scopedFunc({item:this.item});return t("div",{class:"vu-slider__content-item",ref:"item"},[e&&t(e),!e&&t("img",{attrs:{src:this.item},style:this.styleItemImage,ref:"image"})])}},r={name:"ui-slider-dots",functional:!0,inject:{sliderRoot:{default:null}},render:function(t,e){var i=this,s=e.injections,n=s.sliderRoot;return t("div",{class:"vu-slider__dots",style:n.styleDots},[n.elements.map(function(e,s){return 0>e.offsetLeft+n.left+e.clientWidth/3||e.offsetLeft+e.clientWidth-e.clientWidth/3>n.sliderWidth+Math.abs(n.left)?t("span",{class:"vu-slider__dot",on:{click:n.handleDot.bind(i,s)}}):t("span",{class:"vu-slider__dot vu-slider__dot_active"})})])}},l={name:"ui-slider",components:{SliderDots:r,SliderItem:o,SliderItemImage:n},props:{items:Array,height:{type:Number,default:100},width:{type:[Number,String],default:"100%"},buttonsOutside:Boolean,wheel:Boolean,dots:{type:String,default:"",validator:function(t){return!t||t.match(/^(top|bottom)$/)}},dotsInside:{type:Boolean,default:!1},progress:{type:String,default:"",validator:function(t){return!t||t.match(/^(top|bottom)$/)}}},data:function(){return{countItems:0,itemsData:[],elements:[],cols:7,step:1,left:0,loopTimer:null,isLoading:!0,sliderWidth:0,itemsWidth:0}},provide:function(){return{sliderRoot:this}},mounted:function(){!this.items&&this.$slots.default?(this.itemsData=this.$slots.default.filter(function(t){return t.componentOptions&&"ui-slider-item"===t.componentOptions.tag}).map(function(t){return t.componentOptions.propsData.item}),this.countItems=this.itemsData.length):(this.itemsData=[].concat(e(this.items.map(function(t){return t}))),this.countItems=this.itemsData.length)},methods:{addItem:function(t,e){var i=this;this.$set(this.elements,e,t),this.countItems&&this.countItems===this.elements.length&&this.elements.every(function(t){return!!t})&&(this.sliderWidth=this.$refs.slider.clientWidth,this.itemsWidth=this.elements.reduce(function(t,e){return t+e.clientWidth},0),this.$nextTick(function(){i.isLoading=!1}))},handleLeft:function(){var t=this,i=[].concat(e(this.elements)).reverse().find(function(e){return e.offsetLeft+e.clientWidth/2<=Math.abs(t.left)}),s=i?Math.abs(i.offsetLeft+this.left):null;s&&(this.left=this.left+s)},handleRight:function(){var t=this,e=this.elements.find(function(e){return e.offsetLeft+e.clientWidth/2>=Math.abs(t.left-t.sliderWidth)}),i=e?e.offsetLeft+e.clientWidth-this.sliderWidth+this.left:null;i&&(this.left=this.left-i)},handleDot:function(t){var e=this.elements[t];this.left=e.offsetLeft<Math.abs(this.left)?-e.offsetLeft:this.sliderWidth-(e.offsetLeft+e.clientWidth)},handleScroll:function(t){this.wheel&&(t.preventDefault(),0>t.wheelDelta?this.handleRight():this.handleLeft())}},computed:{widthSlider:function(){return"number"==typeof this.width?this.width+"px":this.width},progressPercent:function(){return Math.round(100*(this.sliderWidth+Math.abs(this.left))/this.itemsWidth)},visibleLeftButton:function(){return 0>this.left},visibleRightButton:function(){return Math.abs(this.left)+this.sliderWidth<this.itemsWidth},styleContent:function(){return{height:this.height+"px",width:this.widthSlider}},styleContentItems:function(){return{left:this.left+"px"}},styleContentWrapper:function(){return{margin:this.buttonsOutside?"0 50px":null}},styleProgress:function(){return{width:this.progressPercent+"%"}},styleDots:function(){return{position:this.dotsInside?"absolute":"relative",top:"top"===this.dots?0:null,bottom:"bottom"===this.dots?0:null}}},render:function(t){var e=this,i=this.$vnode.data.scopedSlots&&this.$vnode.data.scopedSlots.default,s=this.itemsData.map(function(s,n){return t(o,{props:{item:s,height:e.height,index:n,scopedFunc:i},key:n})}),n=!this.dots||this.isLoading?null:t(r),l=!this.progress||this.isLoading?null:"top"===this.progress||"bottom"===this.progress?t("div",{class:["vu-slider__progress"]},[t("div",{class:"vu-slider__progress-bar",style:this.styleProgress})]):null,d=t("svg",{attrs:{width:"16px",height:"30px",viewBox:"0 0 16 30",xmlSpace:"preserve"}},[t("polyline",{attrs:{points:"16,30 0,15 16,0"},style:{fill:"none",stroke:this.buttonsOutside?this.visibleLeftButton?"#000000":"lightgrey":"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}})]),h=t("svg",{attrs:{width:"16px",height:"30px",viewBox:"0 0 16 30",xmlSpace:"preserve"}},[t("polyline",{attrs:{points:"0,30 16,15 0,0"},style:{fill:"none",stroke:this.buttonsOutside?this.visibleRightButton?"#000000":"lightgrey":"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}})]),u=t("div",{class:["vu-slider__button","vu-slider__button_left",this.buttonsOutside&&"vu-slider__button_outside",!this.visibleLeftButton&&"vu-slider__button_disabled",!this.isLoading&&this.visibleLeftButton&&"vu-slider__button_visible"],on:{click:this.handleLeft}},[t("div",{class:"arrow left"},[d])]),a=t("div",{class:["vu-slider__button","vu-slider__button_right",this.buttonsOutside&&"vu-slider__button_outside",!this.visibleRightButton&&"vu-slider__button_disabled",!this.isLoading&&this.visibleRightButton&&"vu-slider__button_visible"],on:{click:this.handleRight}},[t("div",{class:"arrow left"},[h])]),f=t("div",{class:"vu-slider__content",style:this.styleContent},[u,a,("top"===this.dots||"bottom"===this.dots)&&this.dotsInside&&n,t("div",{class:"vu-slider__content-wrapper",style:this.styleContentWrapper,ref:"slider"},[t("div",{class:"vu-slider__content-items",style:this.styleContentItems},[s])])]);return t("div",{class:"vu-slider",style:{width:this.widthSlider},on:{wheel:this.handleScroll}},["top"===this.dots&&!this.dotsInside&&n,"top"===this.progress&&l,f,"bottom"===this.progress&&l,"bottom"===this.dots&&!this.dotsInside&&n])}},d={};return d.install=function(t){t.component("vu-slider",l),t.component("vu-slider-item",o)},d.Slider=l,d.SliderItem=o,"undefined"!=typeof window&&window.Vue&&window.Vue.use(d),d});
