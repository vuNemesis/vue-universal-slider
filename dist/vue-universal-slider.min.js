!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VueUniversalSlider=e()}(this,function(){"use strict";function t(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}function e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function i(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);t.length>e;e++)i[e]=t[e];return i}return Array.from(t)}var s=/^(attrs|props|on|nativeOn|class|style|hook)$/,n=function(e){return e.reduce(function(e,i){var n,o,r,l,h;for(r in i)if(n=e[r],o=i[r],n&&s.test(r))if("class"===r&&("string"==typeof n&&(h=n,e[r]=n={},n[h]=!0),"string"==typeof o&&(h=o,i[r]=o={},o[h]=!0)),"on"===r||"nativeOn"===r||"hook"===r)for(l in o)n[l]=t(n[l],o[l]);else if(Array.isArray(n))e[r]=n.concat(o);else if(Array.isArray(o))e[r]=[n].concat(o);else for(l in o)n[l]=o[l];else e[r]=i[r];return e},{})},o={name:"ui-slider-item",props:{item:String,height:Number,index:Number,scopedFunc:Function},data:function(){return{loaded:!0}},computed:{styleItemImage:function(){return{style:{height:this.height+"px"}}}},mounted:function(){var t=this;this.scopedFunc?this.sliderRoot.addItem(this.$el,this.index):this.$refs.image.onload=function(){t.sliderRoot.addItem(t.$el,t.index)}},inject:{sliderRoot:{default:null}},render:function(t){var e=this.scopedFunc&&this.scopedFunc({item:this.item});return t("div",{class:"slider-item",ref:"item"},[e&&e,!e&&t("img",n([{attrs:{src:this.item}},this.styleItemImage,this.classesImage,{ref:"image"}]))])}},r={name:"ui-slider-dots",inject:["sliderRoot"],data:function(){return{slider:this.sliderRoot}},render:function(t){var e=this;return t("div",{class:"slider-dots"},[this.slider.elements.map(function(i,s){return 0>i.offsetLeft+e.slider.left+i.clientWidth/3||i.offsetLeft+i.clientWidth-i.clientWidth/3>e.slider.sliderWidth+Math.abs(e.slider.left)?t("span",n([{class:"dot"},{on:{click:function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;i>o;o++)n[o-1]=arguments[o];e.slider.handleDot.bind(e,s).apply(void 0,[t].concat(n))}}}])):t("span",{class:"dot red"})})])}},l={name:"ui-slider",props:{items:Array,height:{type:Number,default:100},width:{type:[Number,String],default:"100%"},buttonsPosition:{type:String,default:""},buttonsOutside:Boolean,wheel:Boolean,dots:Boolean,progressTop:Boolean,progressBottom:Boolean},data:function(){return{countElements:0,elements:[],itemsData:null,cols:7,step:1,left:0,loopTimer:null,isLoading:!0,sliderWidth:0,itemsWidth:0}},provide:function(){return{sliderRoot:this}},created:function(){!this.items&&this.$slots.default?(this.itemsData=this.$slots.default.filter(function(t){return t.componentOptions&&"ui-slider-item"===t.componentOptions.tag}).map(function(t){return t.componentOptions.propsData.item}),this.countItems=this.itemsData.length):(this.itemsData=[].concat(i(this.items.map(function(t){return t}))),this.countItems=this.itemsData.length)},methods:{addItem:function(t,e){var i=this;this.$set(this.elements,e,t),this.countItems&&this.countItems===this.elements.length&&this.elements.every(function(t){return!!t})&&(this.sliderWidth=this.$refs.slider.clientWidth,this.itemsWidth=this.elements.reduce(function(t,e){return t+e.clientWidth},0),this.$nextTick(function(){i.isLoading=!1}))},handleLeft:function(){var t=this,e=[].concat(i(this.elements)).reverse().find(function(e){return e.offsetLeft+e.clientWidth/2<=Math.abs(t.left)}),s=e?Math.abs(e.offsetLeft+this.left):null;s&&(this.left=this.left+s)},handleRight:function(){var t=this,e=this.elements.find(function(e){return e.offsetLeft+e.clientWidth/2>=Math.abs(t.left-t.sliderWidth)}),i=e?e.offsetLeft+e.clientWidth-this.sliderWidth+this.left:null;i&&(this.left=this.left-i)},handleDot:function(t){var e=this.elements[t];this.left=e.offsetLeft<Math.abs(this.left)?-e.offsetLeft:this.sliderWidth-(e.offsetLeft+e.clientWidth)},handleScroll:function(t){this.wheel&&(t.preventDefault(),0>t.wheelDelta?this.handleRight():this.handleLeft())}},computed:{progressVisible:function(){return this.progressTop||this.progressBottom},progressPercent:function(){return Math.round(100*(this.sliderWidth+Math.abs(this.left))/this.itemsWidth)},visibleLeftButton:function(){return 0>this.left},visibleRightButton:function(){return Math.abs(this.left)+this.sliderWidth<this.itemsWidth},styleSlider:function(){return{style:{height:("bottom"!==this.buttonsPosition&&"top"!==this.buttonsPosition||!this.buttonsOutside||!this.nextLeft&&!this.nextRight?this.height:this.height+50)+"px",width:"number"==typeof this.width?this.width+"px":this.width,paddingBottom:"bottom"===this.buttonsPosition&&this.buttonsOutside&&(this.nextLeft||this.nextRight)?"50px":0,paddingTop:"top"===this.buttonsPosition&&this.buttonsOutside&&(this.nextLeft||this.nextRight)?"50px":0,paddingLeft:!this.buttonsPosition&&this.buttonsOutside?"50px":0,paddingRight:!this.buttonsPosition&&this.buttonsOutside?"50px":0}}},styleContent:function(){return{style:{left:this.left+"px"}}},styleProgress:function(){return{style:{width:this.progressPercent+"%"}}}},render:function(t){var i=this,s=void 0,l=this.$vnode.data.scopedSlots&&this.$vnode.data.scopedSlots.default;s=this.itemsData.map(function(e,s){return t(o,{attrs:{item:e,height:i.height,index:s,"scoped-func":l},key:s})});var h=this.dots?this.isLoading?null:t(r,null):null,d=this.progressVisible?this.isLoading?null:t("div",e({class:"slider-progress"},"class",["slider-progress",this.progressTop&&"top",this.progressBottom&&"bottom"]),[t("div",n([{class:"slider-progress-bar"},this.styleProgress]))]):null,a=t("div",n([e({class:"slider-button"},"class",["slider-button","bottom"===this.buttonsPosition?"slider-button-bottom-left":"top"===this.buttonsPosition?"slider-button-top-left":"slider-button-left",!this.isLoading&&this.visibleLeftButton&&"visible"]),{on:{click:function(t){for(var e=arguments.length,s=Array(e>1?e-1:0),n=1;e>n;n++)s[n-1]=arguments[n];i.handleLeft.apply(i,[t].concat(s))}}}]),["‹"]),u=t("div",n([e({class:"slider-button"},"class",["slider-button","bottom"===this.buttonsPosition?"slider-button-bottom-right":"top"===this.buttonsPosition?"slider-button-top-right":"slider-button-right",!this.isLoading&&this.visibleRightButton&&"visible"]),{on:{click:function(t){for(var e=arguments.length,s=Array(e>1?e-1:0),n=1;e>n;n++)s[n-1]=arguments[n];i.handleRight.apply(i,[t].concat(s))}}}]),["›"]);return t("div",null,[t("div",n([{class:"ui slider"},this.styleSlider,{on:{wheel:function(t){for(var e=arguments.length,s=Array(e>1?e-1:0),n=1;e>n;n++)s[n-1]=arguments[n];i.handleScroll.apply(i,[t].concat(s))}}}]),[t("transition",{attrs:{name:"fade"}},[d]),a,u,t("div",{class:"slider-content",ref:"slider"},[t("div",n([{class:"slider-items"},this.styleContent]),[s])]),t("transition",{attrs:{name:"fade"}},[h])])])}},h={};return h.install=function(t){t.component("ui-slider",l),t.component("ui-slider-item",o)},h.Slider=l,h.SliderItem=o,"undefined"!=typeof window&&window.Vue&&window.Vue.use(h),h});
